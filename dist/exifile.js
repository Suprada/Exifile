!function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(o,l,function(t){return e[t]}.bind(null,l));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){function n(e){return new Promise(t=>setTimeout(t,e))}e.exports={waitByElementId:async function(e){let t=null,o=0;return new Promise(async l=>{for(;null===t||0===t.length;)t=document.getElementById(e),console.log(`Time elapsed to find ${e}: ${300*o}ms`),o++,await n(300);l(!0)})},waitByElemClass:async function(e){let t=null,o=0;return new Promise(async l=>{for(;null===t||0===t.length;)t=document.getElementsByClassName(e),console.log(`Time elapsed to find ${e}: ${300*o}ms`),o++,await n(300);l(!0)})},timeout:n,delayTimer:async function(e,t){return await n(t),e()},waitForChapterToLoad:async function(e,t){let o=e,l=t,i=0;const a=document.getElementById("polling");return new Promise(async(s,r)=>{for(;o===e&&t===l&&300*i<4e3;){i++;await n(300);let e=4e3-300*i;a.innerHTML=`(${e}ms left)`,o=document.getElementsByClassName("visually_hidden chapter_title_heading")[0].innerText,l=Number(document.getElementById("footer").innerText.split(" ")[1])}s(!0)})}}},function(e,t,n){"use strict";n.r(t),n.d(t,"makeOverlayAndSetMessage",(function(){return l})),n.d(t,"updateOverlayMessage",(function(){return i})),n.d(t,"updatePollingCounter",(function(){return a})),n.d(t,"addOverlayHeader",(function(){return s})),n.d(t,"addFooter",(function(){return r}));var o=n(2);const l=(e,t,n,l)=>new Promise(i=>{const a=`<p class='updatedOn'>Updated On: ${l}</p>`;e.setAttribute("class","overlay-info"),document.body.appendChild(e),"www.scribd.com"!==t?(e.innerHTML="<h1>Login to your book at www.scribd.com to start.</h1>",Object(o.a)(e),i()):"www.scribd.com"===t&&"read"!==n?(e.innerHTML="<h1>Please start reading book</h1>",Object(o.a)(e),i()):"www.scribd.com"===t&&"read"===n&&(e.innerHTML=`<h1 id="exifile-h1">Exifiling...</h1><h3 id='exifile-h3'>Takes about 5 mins-ish. Time for a cup of coffee...</h3><p id='exifile-progress'>Starting Exifiling.</p><p class="exifile-status"><span id='exifile-polling'></span> <span id='polling'></span></p>${a}`,i())}),i=e=>new Promise(t=>{const n=document.getElementById("exifile-progress"),o=n.innerText;n.innerHTML=`${o} ${e}`}),a=e=>new Promise(t=>{document.getElementById("exifile-polling").innerHTML=e,t()}),s=({parentEl:e,highlights:t})=>{const n=document.createElement("header");n.setAttribute("class","header-style"),e.appendChild(n);const o=document.createElement("h2");o.innerHTML=t.title,n.appendChild(o);const l=document.createElement("h4");l.innerHTML=t.authors,n.appendChild(l);const i=document.createElement("h4");return i.innerHTML="ISBN: "+t.isbn,n.appendChild(i),null},r=e=>{const t=document.createElement("div");return t.setAttribute("class","exifile-footer"),t.innerHTML="<p><a href='https://oddumbrella.com/exifile/Exifile' target='_blank' rel='noopener noreferrer'>Exifile</a> by Suprada | Free your Scribd highlights</p>",e.appendChild(t),null}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return i}));var o=n(3);const l=({parentEl:e,highlights:t})=>{const n=document.createElement("div");n.setAttribute("class","buttons-header"),e.appendChild(n);const l="Exifile.Highlights_"+t.title.split(" ").join("."),i=Object(o.a)(t).textFile,s=JSON.stringify(t);return a({parentEl:n,stub:l,file:s,type:"JSON"}),a({parentEl:n,stub:l,file:i,type:"Text"}),null},i=e=>{const t=document.createElement("button");return t.setAttribute("class","close-button"),t.innerHTML="X",t.onclick=()=>r(e),e.appendChild(t),null},a=({parentEl:e,stub:t,file:n,type:o})=>{const l=document.createElement("button");return l.setAttribute("class","download-button"),l.innerHTML=`Download ${o}`,l.onclick=()=>s(`${t}.${o}`,n),e.appendChild(l),null},s=function(e,t){const n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},r=function(e){document.body.removeChild(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=e=>{const{title:t,authors:n,isbn:o,annotations:l}=e;let i="",a="";return a+='<ol class="all-quotes">',i+="TITLE: "+t+"\n",i+="AUTHORS: "+n.join(", ")+"\n",i+="ISBN: "+o+"\n",l.forEach(e=>{i+="\n",a+='<li class="quote-style">',"highlight"===e.type?(a+='<span class="text">'+e.excerpt+"</span>",i+=e.excerpt+"\n"):"note"===e.type&&(i+="NOTE: "+e.excerpt+"\n",a+='<br><span class="note">Note: '+e.excerpt+"</span>"),i+="LOCATION: "+e.location+"\n",a+='<br><span class="page-number">'+e.location+"</span>",a+="</li>"}),a+="</ol>",{textFile:i,displayText:a}}},function(e,t,n){"use strict";n.r(t);n(8);const{makeOverlayAndSetMessage:o}=n(1),{initExifile:l}=n(9),{waitByElementId:i,waitByElemClass:a}=n(0);exifile=async function(){const e=document.createElement("div"),t=location.hostname,n=location.pathname.split("/")[1];await o(e,t,n,"Friday, April 10, 2020"),l(e)}()},function(e,t,n){"use strict";n.r(t),n.d(t,"closeModal",(function(){return o}));const o=()=>{const e=document.getElementsByClassName("icon-ic_close")&&document.getElementsByClassName("icon-ic_close_small");e.length>0&&e[0].click()}},function(e,t,n){"use strict";n.r(t),n.d(t,"scrollDownPage",(function(){return o}));const o=()=>new Promise(e=>{const t=document.getElementsByClassName("vertical_page");t[t.length-1].scrollIntoView(),document.getElementsByClassName("buttons_container")[0].scrollIntoView(),e()})},function(e,t,n){"use strict";n.r(t),n.d(t,"scrapeHighlights",(function(){return o}));const o=()=>{let e={};const t=document.getElementsByClassName("highlight");if(t.length>0){for(let n of t){const t=n.className.split(":")[1];e[t]?e[t].text.push(n.innerHTML):e[t]={id:t,text:[n.innerHTML]}}return e}return null}},function(e,t,n){},function(t,n,o){"use strict";o.r(n),o.d(n,"initExifile",(function(){return y}));const{waitByElemClass:l,waitForChapterToLoad:i}=o(0),{closeModal:a}=o(5),{timeout:s}=o(0),r=()=>{let e=null,t=null,n=null;return new Promise(async o=>{for(;null===n||0===n.length;)n=document.getElementById("notebook_modal"),await s(300);for(;null===e&&(null===t||0===t.length);)t=n.getElementsByClassName("annotation"),e=n.getElementsByClassName("empty_notebook"),await s(300);o(!0)})};var c=o(2),u=o(1);const{scrollDownPage:d}=o(6),{scrapeHighlights:m}=o(7);var g=o(0);var p=o(3);const h=(e,t)=>{console.log("Num of bookHighlights",t.length);const n=[];e.annotations.reverse().forEach((e,o)=>{t[o]&&(e.excerpt=t[o].text,n.push(e))}),e.annotations=n,(e=>{const t=document.getElementsByClassName("overlay-info")[0],n=document.createElement("main");n.setAttribute("class","overlay-results"),t.innerHTML="Done Loading Highlights",document.body.removeChild(t),document.body.appendChild(n),Object(u.addOverlayHeader)({parentEl:n,highlights:e}),Object(c.b)({parentEl:n,highlights:e}),Object(c.a)(n);const o=Object(p.a)(e).displayText,l=document.createElement("div");l.setAttribute("class","highlights-text"),l.innerHTML=o,n.appendChild(l),Object(u.addFooter)(n)})(e)},f=async()=>{let t={};t=(e=>{const{title:t,author_name:n}=Scribd.current_doc;return e.isbn=document.querySelector('meta[property="books:isbn"]').getAttribute("content"),e.title=t,e.authors=[n],e})(t);const n=await new Promise(async e=>{document.getElementsByClassName("icon-ic_toc_list")[0].click(),await l("menu_heading visually_hidden");const t=document.getElementsByClassName("menu_heading visually_hidden")[0].parentElement.querySelector("ul"),n=t.querySelectorAll("li");let o=[];n.forEach(e=>{o.push(e.querySelector("span").innerText)}),t.children[0].click();const a=document.getElementsByClassName("visually_hidden chapter_title_heading")[0].innerText;await i(a),console.log("end of go to cover page"),e(o)});if(t.annotations=await(async()=>{let e=[];document.getElementsByClassName("icon-ic_overflowmenu")[0].parentElement.click(),document.getElementsByClassName("icon-ic_notebook")[0].parentElement.click(),await r();const t=document.getElementsByClassName("annotation");if(t.length>0){for(let n of t){const t=n.getElementsByClassName("page_num")[0].innerHTML,o=n.getElementsByClassName("annotation_type")[0].innerHTML,l=n.getElementsByClassName("time")[0].innerHTML,i=n.getElementsByClassName("excerpt")[0].innerHTML;i&&""!==i&&"No preview available"!==i&&"highlight"===o&&e.push({location:t,type:o,time:l,excerpt:i})}return a(),e}return a(),console.log("no notes and bookmarks available in this book"),null})(),Object(u.updateOverlayMessage)(`<p>Found ${t.annotations.length} annotations in ${t.title}</p>`),console.log(`Found ${t.annotations.length} annotations in ${t.title}`),t.annotations){const e=await(t.annotations,new Promise(e=>{const t=document.getElementById("footer").innerText.split(" ")[3].split(",")[0];e(Number(t))}));let o=await(async(e,t,n)=>{let o=1,l={},i=1,a=[],s=[],r={},c=!1;for(console.log("Reading book now",o,t,c);!isNaN(o)&&o<t&&!1===c;){i++,r=await new Promise(async e=>{d(),e({scrapedHighlights:m(),currentPage:Number(document.getElementById("footer").innerText.split(" ")[1])})}),o=r.currentPage;const e=document.getElementsByClassName("visually_hidden chapter_title_heading")[0].innerText,t=`In chapter: <em>${e}</em>. Loop ${i}</In>`;await Object(u.updatePollingCounter)(t),l=Object.assign(l,r.scrapedHighlights),a=document.getElementsByClassName("only_next_btn"),s=document.getElementsByClassName("load_next_btn");const p=n.length;a&&a.length>0?(a[0].scrollIntoView(),a[0].getElementsByTagName("button")[0].click(),await Object(g.waitForChapterToLoad)(e)):s&&s.length>0&&e!==n[p-1]?(s[0].scrollIntoView(),s[0].click(),await Object(g.waitForChapterToLoad)(e,o)):(console.log("quitting loop"),c=!0)}return l})(0,e,n);const l=Object.keys(o).map(e=>{const{id:t,text:n}=o[e],l={};return l.id=t,l.text=n.join(" "),l});h(t,l)}else console.log("no annotations found"),e.innerHTML="<h1>Exifile</h1><h2>This book has no highlights.</h2>",Object(c.a)(e)},y=async e=>{document.getElementsByClassName("vertical_reader_container").length>0?f():(e.innerHTML='<h3>Vertical scrolling is not enabled! Enabling and reloading.</h3> \n<p>Please click on exifile bookmarklet again after page reloads</p>.\n<p>If that doesn\'t work please try to do the following yourself, and then start Exifile</p>\n<ol class="info-list">\n    <li>Vertical scrolling: Go to "Display Settings". Change scrolling direction to "Vertical Scrolling"</li>\n    <li>Day Theme:  Go to "Display Settings" and change theme to "Day Theme"</li>\n  </ol>\n',console.log("vertical scrolling is not enabled. Exifile will enable vertical scrolling. Please click on exifile bookmarklet again after page reloads"),await Object(g.timeout)(1e3),window.location.href=window.location.origin+window.location.pathname+"?mode=standard")}}]);